{% extends 'layout.html' %}

{% block content %}
<div class="container mt-5 mb-5">
    <h1 class="profile-title text-center mb-4">Profil użytkownika</h1>

    {% if messages %}
        <div class="mb-4">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <div class="profile-card mb-5 mx-auto" style="max-width: 900px;">
        <div class="card-body">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item bg-transparent text-dark">
                            <i class="bi bi-person-circle me-2"></i>
                            <strong>Nazwa użytkownika:</strong> {{ user.username }}
                        </li>
                        <li class="list-group-item bg-transparent text-dark">
                            <i class="bi bi-envelope-at me-2"></i>
                            <strong>Email:</strong> {{ user.email }}
                        </li>
                        <li class="list-group-item bg-transparent text-dark">
                            <i class="bi bi-card-text me-2"></i>
                            <strong>Opis:</strong> {{ profile.description }}
                        </li>
                        <li class="list-group-item bg-transparent text-dark">
                            <i class="bi bi-calendar-event me-2"></i>
                            <strong>Data urodzenia:</strong> {{ profile.birth_date }}
                        </li>
                        <li class="list-group-item bg-transparent text-dark">
                            <i class="bi bi-telephone me-2"></i>
                            <strong>Numer telefonu:</strong> {{ profile.phone_number }}
                        </li>
                    </ul>
                </div>

                <div class="col-md-4 text-center">
                    {% if profile.profile_picture %}
                        <img src="{{ profile.profile_picture.url }}"
                             alt="Zdjęcie profilowe"
                             class="img-thumbnail rounded-circle mb-2"
                             style="width: 150px; height: 150px; object-fit: cover;">
                        <p class="text-muted">Zdjęcie profilowe</p>
                    {% else %}
                        <div class="bg-light rounded-circle d-flex align-items-center justify-content-center mb-2"
                             style="width: 150px; height: 150px; margin: 0 auto;">
                            <span class="text-muted">Brak zdjęcia</span>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="profile-card mb-4 mx-auto text-center" style="max-width: 600px;">
        <div class="card-body">
            <h2 class="h5 mb-3">Moje treści</h2>
            <div class="profile-actions d-flex justify-content-center gap-3 flex-wrap">
                <a href="{% url 'events:user_event_list' %}" class="btn btn-outline-primary">Moje Wydarzenia</a>
                <a href="{% url 'announcements:user_announcement_list' %}" class="btn btn-outline-primary">Moje Ogłoszenia</a>
                <a href="{% url 'photo_gallery:user_gallery_list' %}" class="btn btn-outline-primary">Moje Galerie Zdjęć</a>
                <a href="{% url 'polls:user_poll_list' %}" class="btn btn-outline-primary">Moje Ankiety</a>
            </div>
        </div>
    </div>

    <div class="profile-card mx-auto text-center" style="max-width: 600px;">
        <div class="card-body">
            <h2 class="h5 mb-3">Opcje konta</h2>
            <div class="profile-actions d-flex justify-content-center gap-3 flex-wrap">
                <a href="{% url 'user_profile:account_settings' %}" class="btn btn-outline-primary">Ustawienia konta</a>
                <a href="{% url 'user_profile:profile_edit' %}" class="btn btn-outline-primary">Edytuj dane profilu</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
